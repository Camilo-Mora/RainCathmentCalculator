<head>
    <title>Mora Lab - Rainwater Catchment Calculator</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="description" content="Laboratory of Camilo Mora at the University of Hawaii: Outreach projects to increase Public Awareness on Environmental Issues.">
    <meta name="keywords" content="Camilo Mora, The Mora Lab, Public Outreach, YouTube, Fish, Marine Animal Populations, Census of Marine Life, models, prediction, extinction, statistics, meta-analysis, research, coral reefs">
    <meta name="author" content="Camilo Mora">


    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <!--<script src="http://code.highcharts.com/highcharts.js"></script>-->
    <script src="http://cdnjs.cloudflare.com/ajax/libs/highcharts/6.2.0/highcharts.js"></script>
    
</head>

<body>
    
<p style="text-align:center;">	
<a href="https://camilo-mora.github.io/MoraLab/">Return to <font size="5" COLOR="black"><i>Mora</i></font><font size="5" COLOR="blue"><i>Lab</i></font></a>
</p>
	
    
 <div class="content">
<div class="content_resize">

<table width="900" border="0" align="center">

    <tr>
        <td colspan="2" align="center">
<br>
                            <strong><span style="font-size:20px; color: #006;">Rainwater Catchment Calculator</span></strong>
                            <br>
                            By Camilo Mora<br>

       
        
        </td>
    </tr>
    
    
    <tr>
    <td width="700" colspan="2" valign="top">

        <p style="text-align:center;">
            <img src="images/IMG_E4917.jpg" width="700">

            <br>
        </p>

    </td>

</tr>

    
        <tr>
        <td colspan="2" align="left">
<br>
            Lack of water is one of the top causes for tree mortality. Remarkably, at any given site, a native species likely gets all the rainwater in a year that needs; if not, it will not be there. The problem for most individual trees is the sporadic nature of rainfall. <br><br>As my daughter Asryelle puts it, this is like going to an all-you-can-eat buffet for one day, and then ask to survive the following 30 days without food; enough food is there just not at the right time. <br><br>Going back to rainwater irrigation, the trick is how to store enough water when it rains to be used when it does not. <br><br>The solution to this problem requires to know 1) how much water it rains and the area over which you will collect water, 2) the size of your water reservoir, and 3) the amount of water to be used. The balance of these three factors will determine if you will run out of water in your tank. <br><br>This application has been developed for the purpose of calculating the water volume in a tank given water collected and used over time. You can play around with specific parameters so you can tailor your water catchment and needs to an specific site.<br><br>
            

            <p style="text-align:center;">
            <img src="images/IMG_4918.jpg " width="700">

            <br>
        </p>
        
       <br> <br>
            Let's firsts understand the parameters at play, using the water catchment above as example, which I built with my partner Audrey and my daughter Asryelle. Remember that the ultimate goal is to have water available in the tank at all times. <br> <br>So the first thing you need is data on rainfall (a); the app requires you to use daily rainfall data in mm. The app uses as default rainfall data from Kukaniloko in Oahu, but you can use your own data, just be sure to separate data from each day with a comma. <br><br>The second parameter needed is the area of your catchment (b). By multiplying rainfall in mm by area of catchment in mm2, you get the volume of water collected. <br><br>The third parameter is the size of your water tank (c). The amount of water collected will never exceed the size of your tank. <br><br>Finally, it is the water to be used (d); in our case this is the number of trees times the water you will give each day to each tree. 
        <br><br>
            Basically,<br><br>
            <center>Water in tank=(rainfall*area catchment)-(number of trees*water to be added per tree)</center><br><br>
            This calculation is done cumulatively over each consecutive day, ensuring the water in the tank is not larger than the tank size nor below zero.
    
    <br><br><br> <br><br> 
  <strong><span style="font-size:20px; color: #006;">Rainwater catchment calculator</span></strong>  
    
    <br><br>
            (a) Daily precipitation data (in mm, comma separated): <br>
<input  id="DailyPrecipitation"  style="width:80%" type="text" value="0.000,0.000,0.319,0.774,0.307,0.026,0.000,0.000,0.026,0.177,0.938,0.333,0.085,0.000,3.323,1.913,9.046,4.015,0.000,0.000,0.046,0.000,0.000,0.000,0.369,15.056,3.615,0.634,1.533,0.274,0.045,0.015,0.000,0.014,0.468,5.057,9.653,18.567,1.119,0.113,0.000,0.555,4.826,0.767,0.739,0.000,1.407,1.601,1.828,2.956,0.933,0.933,2.002,1.096,1.847,5.369,11.635,0.806,2.422,4.093,0.014,7.809,24.725,15.248,29.921,46.485,9.996,11.625,9.072,2.423,4.420,5.434,0.293,0.025,0.262,0.102,1.776,2.027,0.770,0.292,2.690,3.949,3.525,8.054,0.012,2.312,1.223,0.000,0.030,0.013,0.000,0.000,0.000,0.000,1.831,0.895,4.179,0.035,11.390,5.199,7.323,0.200,1.337,1.116,0.078,0.325,0.073,0.066,0.000,0.011,0.210,1.661,10.829,7.714,0.364,0.301,0.689,0.621,0.221,1.858,0.125,2.531,10.574,3.308,10.304,2.591,3.110,5.307,0.396,1.672,1.268,0.093,0.011,0.000,0.229,0.000,0.108,5.117,1.955,0.395,1.948,0.093,0.049,4.833,1.323,4.288,6.904,8.835,0.440,0.736,0.733,2.661,0.199,0.486,0.004,0.001,0.204,1.749,0.034,0.637,0.074,0.525,0.284,1.950,8.744,1.077,0.034,0.910,0.055,0.242,1.699,0.389,0.056,0.602,2.919,0.705,3.320,1.503,0.585,0.626,0.000,0.059,1.075,0.420,1.709,2.931,2.476,1.233,3.569,0.090,0.435,1.851,0.543,0.215,0.037,0.000,1.311,2.707,2.140,1.001,0.314,0.279,2.744,1.088,1.129,1.680,0.502,0.524,0.448,1.878,4.416,0.092,0.099,0.000,0.005,0.000,0.053,1.367,0.472,1.055,1.668,0.097,0.100,1.224,2.155,0.193,0.354,0.739,0.122,0.203,0.038,0.615,0.631,0.576,0.347,5.885,0.047,0.592,0.757,3.281,5.041,2.102,0.007,0.206,0.994,3.633,1.989,1.690,10.399,1.780,11.753,12.687,3.835,4.464,2.659,2.814,3.346,1.889,1.773,0.732,1.345,0.515,1.654,6.761,0.616,0.677,3.019,0.754,0.991,2.104,1.331,1.316,0.049,0.753,0.101,0.000,0.000,0.000,0.000,0.013,0.623,0.183,0.029,0.857,1.061,0.053,0.166,9.918,2.125,2.501,0.087,0.044,0.050,2.695,0.045,0.003,0.000,0.452,3.426,0.677,0.145,4.060,0.534,1.034,0.398,0.074,0.000,0.000,0.000,1.219,4.454,0.379,2.910,1.412,0.876,0.513,3.063,3.046,3.762,4.354,5.073,4.518,0.392,1.147,0.030,0.700,0.073,7.061,0.470,0.504,0.260,0.000,0.058,0.000,0.000,0.086,0.130,0.884,1.567,4.441,0.042,0.008,0.962,0.487,0.814,0.228,1.063,10.336,10.075,7.895,19.721,20.964,4.010,24.591,12.058,3.701,1.059,0.063,0.042,2.034,0.004,0.000,0.000,0.000,1.391,0.155,8.061,8.572,13.749,21.104,19.928,2.924,6.360,3.537,0.859,0.193,0.421,0.344,0.185,20.713,1.046,0.418,0.116,0.000,0.000,0.000,0.000,0.000,2.178,9.251,2.457,0.735,61.920,11.278,1.161,7.801,0.420,0.031,0.000,0.000,1.814,3.264,2.516,0.773,0.255,0.066,2.775,3.932,0.296,0.032,0.105,2.459,10.031,0.730,4.028,12.311,32.202,42.050,36.893,13.199,0.730,1.312,7.063,0.785,0.016,0.174,0.079,0.000,0.000,0.000,0.000,0.000,0.000,7.811,18.593,0.118,0.000,0.056,0.000,1.122,0.692,0.551,0.154,0.003,0.000,0.148,7.739,1.410,5.002,2.950,2.533,14.518,1.957,2.079,0.048,0.000,0.287,0.254,0.503,0.000,0.000,1.708,0.041,0.000,0.200,3.405,0.041,0.041,0.306,16.168,1.216,0.106,0.505,1.506,3.531,0.136,0.357,6.812,9.138,27.123,0.008,0.000,0.000,0.000,0.936,15.020,0.683,0.621,0.028,34.041,19.518,1.437,0.000,0.099,0.084,0.893,1.986,8.341,6.329,0.154,3.004,2.966,2.483,6.677,2.647,0.143,0.000,7.787,0.104,0.121,7.539,0.963,1.992,27.500,15.988,0.600,1.014,0.971,0.932,0.114,0.005,0.043,0.013,2.003,1.580,0.595,0.090,0.167,1.734,12.223,3.881,1.195,1.290,2.894,4.606,0.504,1.496,3.687,2.793,4.113,1.626,2.372,0.668,0.081,0.582,1.603,0.804,1.281,0.542,0.077,0.117,0.000,0.420,0.233,0.444,1.202,2.887,4.345,4.833,0.497,0.462,1.112,0.120,1.524,0.425,0.083,0.656,0.270,8.103,0.994,0.038,0.000,0.556,0.227,1.031,9.094,6.262,2.327,0.610,1.176,0.774,0.539,0.414,0.090,0.000,0.179,2.390,6.852,1.806,0.039,1.213,0.485,0.352,0.094,0.047,0.000,0.058,1.198,0.562,0.092,0.034,0.310,0.047,0.000,0.087,2.059,0.578,0.144,0.557,4.296,0.015,0.107,0.277,1.732,0.259,3.599,0.829,0.144,0.056,0.143,1.177,6.579,0.129,0.147,1.564,7.607,3.275,1.257,0.596,3.881,2.394,0.681,2.908,6.910,0.854,0.026,2.167,1.764,5.356,0.625,3.775,1.491,3.733,3.277,1.307,0.651,6.609,4.862,0.620,0.863,0.669,3.793,10.370,1.828,0.132,0.220,0.171,1.804,0.190,0.286,0.281,0.096,0.021,0.419,0.000,5.887,0.568,0.911,2.153,2.533,4.249,0.859,1.057,0.531,2.605,8.229,18.310,19.775,62.029,23.246,2.327,0.080,0.167,4.994,2.904,0.000,1.611,0.093,0.013,0.000,0.140,1.959,0.267,0.000,0.000,0.000,0.066,1.045,12.784,17.936,58.812,2.807,1.070,0.000,0.000,0.156,0.226,0.967,0.288,0.302,1.252,2.793,2.725,0.752,47.414,0.164,0.405,3.423,21.839,0.807,1.253,0.128,7.002,0.967,0.448,0.229,1.752,3.629,0.097,1.343,0.243,0.046,23.405,6.419,0.184,0.611,0.035,0.026,0.709,0.236,1.356,2.016,5.977,10.120,2.519,0.479,1.510,0.395,0.047,0.142,0.028,8.391,6.941,0.026,0.000,0.702,9.993,2.106,4.639,15.077,1.093,4.950,16.898,3.352,6.926,11.853,4.419,0.742,1.501,4.172,2.087,0.395,0.012,0.017,3.833,6.442,6.098,4.496,3.711,0.891,0.508,0.026,0.207,0.814,0.032,0.597,1.220,0.095,0.085,4.132,7.609,6.269,0.807,0.181,0.165,2.842,10.150,4.120,0.631,2.494,0.955,0.106,0.238,1.952,2.707,0.144,0.000,0.000,0.178,0.111,0.020,0.011,0.000,0.622,10.834,20.169,12.394,7.301,6.978,2.202,1.914,4.502,2.610,0.189,0.029,0.000,2.140,1.116,0.008,0.000,0.118,0.171,2.406,1.015,0.259,1.137,2.761,9.301,4.251,0.423,6.039,8.724,1.598,2.325,6.778,11.931,16.989,4.146,0.196,0.645,1.605,0.196,4.504,1.009,0.473,2.775,1.178,0.281,1.333,0.094,0.690,4.550,1.791,0.026,0.327,1.098,0.860,0.117,1.188,2.973,2.582,0.378,0.428,0.041,12.287,46.989,8.361,9.499,3.190,0.502,0.210,0.652,1.115,8.686,0.457,0.060,0.980,4.952,1.474,1.044,0.888,0.105,0.048,0.020,0.003,1.093,2.497,2.272,3.190,0.781,0.672,1.230,0.998,0.665,1.055,0.933,0.458,2.705,3.014,1.421,1.051,0.049,0.045,0.630,2.497,0.720,3.293,3.997,1.268,4.655,2.231,0.339,0.270,0.279,3.079,6.930,2.320,1.519,1.865,0.622,23.559,16.025,2.684,2.629,1.450,1.302,0.124,0.906,0.412,0.000,0.000,0.000,0.158,0.210,0.229,0.077,0.079,0.211,1.365,3.338,19.758,6.271,0.213,0.019,0.369,0.095,0.132,0.132,0.000,0.182,0.358,0.427,0.140,0.331,0.347,1.010,1.595,2.050,0.633,0.025,0.045,0.032,0.115,1.542,2.313,0.284,0.065,0.115,0.423,0.325,0.003,0.000,0.020,0.486,0.176,0.067,0.000,1.874,1.069,0.334,0.803,2.961,0.697,0.083,3.865,1.647,0.314,0.845,2.977,1.148,0.672,1.213,1.081,10.299,12.045,1.255,2.751,7.732,2.983,0.567,4.200,0.272,0.215,0.884,1.251,0.322,6.101,2.344,0.064,0.076,5.649,33.221,57.787,7.987,0.101,10.690,4.088,0.986,4.317,1.973,0.173,0.281,0.571,0.793,14.166,5.687,4.280,3.453,0.340,2.119,0.255,2.181,5.244,0.000,0.000,3.105,2.702,0.040,4.165,12.648,2.427,0.000,0.000,1.032,0.971,0.275,0.033,1.068,8.614,0.102,0.000,0.000,0.163,3.938,1.737,0.287,1.895,17.881,0.672,3.530,0.029,0.032,0.030,0.247,4.628,2.091,0.911,1.247,7.463,1.120,5.921,3.682,9.520,1.197,0.038,1.194,25.968,7.903,8.074,1.412,1.701,0.353,0.000,0.000,14.052,1.876" 


onblur="myFunction()"> 
<br>Displayed are daily precipitation data for Kukaniloko. Just delete the data and use your own.<br><br>

First date in time series<br>
Year<input name="Year" 	style="width:40px" value="2012" onblur="myFunction()">
Mon<input name="Mon" 	style="width:30px" value="1" onblur="myFunction()"> 
Day<input name="Day" 	style="width:30px" value="1" onblur="myFunction()"><br><br>

<br><br>
(b) Catchment area:<br>
            Canopy width: <input type="number" value="8"  style="width:60px" id="CanopyWidth" step="0.0001" onblur="myFunction()">
length: <input type="number" style="width:60px" value="10" id="CanopyLength" step="0.0001" onblur="myFunction()"> feet<br><br>
<br><br>
            
(c) Reservoir size:<br> <input name="test1" style="width:60px"  value="200"  onblur="myFunction()"> litters  <br><br>
<br><br>  
(d) Water usage: <br>  
Number of trees to irrigate:<input type="number" value="15" style="width:60px" id="TreesToIrrigate" step="1" onblur="myFunction()"><br><br>
Desire water a day per tree (fraction acceptable): <input type="number" value="0.15" style="width:60px" id="DesireWater" step="0.00001" onblur="myFunction()"> litters



<br><br>
          
Adjust irrigation if it rains (Tree area)*: <input type="number" value="0" style="width:60px" id="TreeArea" step="0.1" onblur="myFunction()"> in feet2<br>
*if you can control irrigation, you may use less water from the reservoir. This parameter lets you adjust how much water to take from the tank depending how much the rainfall in the given day contributes to the desire amount of water you want to add to each tree. This is to be used when you have an irrigation control that can measure rainfall or soil moisture, if you do not have such a device leave this field as zero.

<br><br>
<button onclick="myFunction()">Calculate</button>    

<p id="demo"></p>

<div id="container" style="width:100%; height:300px;"></div>


<script>

function myFunction() {
	var Year = parseFloat($("input[name='Year']").val());	  
	var Mon = parseFloat($("input[name='Mon']").val());
	var Day = parseFloat($("input[name='Day']").val());
	
	var AccumulatedWater=0;

	
	var SizeReservoir = parseFloat($("input[name='test1']").val());	  


	var CanopyWidth = document.getElementById("CanopyWidth").value;
	var CanopyLength = document.getElementById("CanopyLength").value;
	var DesireWater = document.getElementById("DesireWater").value;
	var TreesToIrrigate = document.getElementById("TreesToIrrigate").value;
	var TreeArea = document.getElementById("TreeArea").value;
    var Results=[];



DailyPrecipitation = document.getElementById("DailyPrecipitation").value.split(",");
      for (i = 0; i < DailyPrecipitation.length; i++) {
      
	  WaterOnTree=(parseFloat(DailyPrecipitation[i])*(TreeArea*92903))/10000000; //calculate water falling over the tree. what is left to the target is taken from the resercoir
	  TargetWater=DesireWater-WaterOnTree
	  
	  if (TargetWater <0) {WaterToAdd=0;} else {WaterToAdd=TargetWater;}
	  
	  
	  WaterCatched=(parseFloat(DailyPrecipitation[i])*(CanopyWidth*304.8)*(CanopyLength*304.8))/10000000; //mutiply precip by area of canopy to get volume catched in cubic milimeter, convert to litters
	  
	  AccumulatedWater=AccumulatedWater+WaterCatched-(WaterToAdd*TreesToIrrigate); //water used in a day, which is water desire times number of trees

if (AccumulatedWater >=SizeReservoir) {
Results[i]=SizeReservoir;
AccumulatedWater=SizeReservoir;
} else if (AccumulatedWater <0) {
Results[i]=0;
AccumulatedWater=0;
} else {
Results[i]=AccumulatedWater;
}
	  
	  }
	  


document.getElementById("demo").innerHTML = "Giving " + Math.round((parseFloat(DesireWater)*7)* 10.0) / 10.0+ " liters a week";


setTimeout(function(){

// generates a variable with the data to be plotted in the x-y chart
var Results1=Results;


 $('#container').highcharts({

chart: { type: 'scatter',zoomType: 'x'},
title: {text: ''},
tooltip: {valueDecimals: 0,headerFormat: '<b></b>',pointFormat: "{point.y} litters by {point.x:%B-%d-%Y}",hideDelay: 1},
xAxis: {type: 'datetime',title: {text: 'Date'},tickInterval: 24 * 3600 * 1000},
yAxis: {title: {text: 'Water in tank (liters)'},min: 0},
legend: {enabled: false},
plotOptions:
  {
  area: {
        fillColor:
          {
          linearGradient: { x1: 0, y1: 0, x2: 0, y2: 1},
          stops: [[0, Highcharts.getOptions().colors[0]],[1, Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity    (0).get('rgba')]]
          },
        marker: {radius: 2},
        lineWidth: 1,
        states: {hover: {lineWidth: 1}},
        threshold: null
        }
  },

    series: [{
        type: 'area',
		tickInterval: 24 * 3600 * 1000,  // one week
        pointInterval: 24 * 3600 * 1000, 
        pointStart: Date.UTC(Year, Mon-1, Day),
        data:Results1
    }]
});

}, 1);

}

</script>

<br>  <br>      
 The Rainwater Catchment Calculator was developed by Camilo Mora. Thanks to Prof. Giambelluca and Matthew Lucas for providing daily data for Kukaniloko.   
    
            </td>
    </tr>
    
    
    

    
    
</table>
 <br> <br><br> <br>   
    
    
</div>
</div>   
</body>